## Race Condition이란?
Race Condition은 여러 프로세스나 스레드가 공유 자원에 동시에 접근할 때 발생하는 경쟁 상태입니다. 실행 순서에 따라 결과값이 달라질 수 있어 예측 불가능한 결과가 발생할 수 있습니다.

예시: 은행 계좌에서 동시에 출금하는 경우, 잔액 확인과 차감 사이에 다른 프로세스가 끼어들어 잘못된 잔액이 계산될 수 있습니다.

---

## Race Condition 해결 방법?
프로세스를 동기화 시킴으로써 문제를 해결할 수 있습니다. 구체적인 방법으로는 

1. 뮤텍스(Mutex)
2. 세마포어(Semaphore)
3. 모니터(Monitor)

의 방법이 있습니다.

---

## 프로세스의 코드 영역?

### Critical Section (임계 구역)
- 정의: 여러 프로세스가 공유하는 데이터를 접근하고 변경하는 코드 영역
- 특징:
    - 한 번에 하나의 프로세스만 진입 가능
    - 동기화가 필요한 영역
    - 레이스 컨디션이 발생할 수 있는 영역
- 예시: 공유 변수 수정, 공유 파일 접근 등

### Entry Section (진입 구역)
- 정의: Critical Section에 진입하기 위한 허가를 요청하는 코드 영역
- 특징:
    - Critical Section 진입 전 실행되는 코드
    - 다른 프로세스의 Critical Section 사용 여부를 확인
    - 동기화 알고리즘이 구현되는 영역
- 예시: 뮤텍스 lock 획득, 세마포어 wait 연산 등

### Exit Section (퇴출 구역)
- 정의: Critical Section을 벗어날 때 실행되는 코드 영역
- 특징:
    - Critical Section 사용 완료를 알림
    - 다른 프로세스가 진입할 수 있도록 허가
    - 자원 해제가 이루어지는 영역
- 예시: 뮤텍스 unlock, 세마포어 signal 연산 등

### Remainder Section (나머지 구역)
- 정의: 위의 세 영역을 제외한 나머지 코드 영역
- 특징:
    - 공유 자원과 무관한 코드가 실행되는 영역
    - 동기화가 필요 없는 영역
    - 독립적으로 실행 가능한 영역
- 예시: 지역 변수 사용, 독립적인 연산 수행 등

이러한 구분은 멀티태스킹 환경에서 프로세스 간 동기화를 효율적으로 관리하고 Race Condition을 방지하는 데 중요한 역할을 합니다.

---

## Critical Section Problem?
여러 프로세스가 공유 데이터를 동시에 사용하려 할 때, 한 프로세스가 Critical Section에서 작업 중일 때 다른 프로세스가 접근하지 못하도록 하는 문제입니다.

---

## Critical Section 문제 해결을 위한 3가지 조건?
1. 상호배제(Mutual Exclusion): 한 프로세스가 Critical Section에 있으면 다른 프로세스는 들어갈 수 없음
2. 진행(Progress): Critical Section이 비어있다면 들어가고자 하는 프로세스가 들어갈 수 있어야 함
3. 유한 대기(Bounded Waiting): 프로세스가 Critical Section에 들어가기 위해 무한정 기다리지 않아야 함

---

## Peterson 알고리즘?
Peterson 알고리즘은 두 프로세스 간의 상호배제를 소프트웨어적으로 해결하는 알고리즘입니다. flag와 turn 변수를 사용하여 임계 구역 진입을 제어합니다. Peterson 알고리즘을 통해

1. 상호배제 보장
2. 데드락 방지 (turn 변수로 인해)
3. 기아 문제 해결 (차례가 반드시 돌아옴)

을 해결할 수 있습니다.

단, 현대 컴퓨터 구조에서는 메모리 재배치로 인해 실제 구현시 문제가 발생할 수 있습니다.

---

## 원자성 변수(Atomic Variable)?
원자성 변수는 읽기와 쓰기가 하나의 단위 연산으로 처리되어 중간에 방해받지 않는 변수입니다. 멀티스레드 환경에서 공유 자원에 대한 동기화를 위해 사용됩니다.

### 피터슨 알고리즘:
- flag와 turn 변수의 쓰기 순서가 컴파일러나 CPU에 의해 재배치될 수 있음
- 이로 인해 상호배제가 깨질 수 있음

### 원자성 변수 → 해결책:
- 원자성 변수는 메모리 순서(Memory Ordering) 보장
- acquire/release 의미체계를 통해 메모리 접근 순서 강제
- 컴파일러나 CPU의 재배치 최적화 방지
