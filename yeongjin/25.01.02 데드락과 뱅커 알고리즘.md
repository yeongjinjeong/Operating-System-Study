# 데드락(Deadlock) 면접 질문 및 답변 정리

## Q1. 데드락의 개념과 발생하는 상황에 대해서 설명하세요.

데드락은 두 개 이상의 프로세스가 서로가 가진 자원을 기다리며 무한히 대기하는 상태를 의미합니다.

### 데드락 발생 조건
데드락이 발생하기 위한 4가지 필수 조건이 있습니다:

- **상호 배제**: 한 시점에 하나의 프로세스만 자원 사용 가능
- **점유 대기**: 자원을 보유한 상태에서 다른 자원 대기
- **비선점**: 프로세스가 자원을 강제로 빼앗기지 않음
- **순환 대기**: 프로세스간 자원 요청이 순환 형태로 발생

## Q2. 어떻게 데드락을 해결할 수 있나요?

다음과 같은 방법으로 데드락을 해결할 수 있습니다:

1. **예방(Prevention)**
   - 4가지 발생 조건 중 하나를 제거

2. **회피(Avoidance)**
   - 은행원 알고리즘을 사용하여 안전 상태를 유지
   - 자원 요청 시 시스템이 안전 상태를 유지할 수 있는 경우에만 할당

3. **탐지 및 복구(Detection & Recovery)**
   - 시스템 자원 할당 그래프를 통해 데드락 감지
   - 감지 시 프로세스 강제 종료나 자원 선점을 통해 해결

## Q3. 예방에 대해서 더 자세하게 설명해주세요.

### 데드락 예방 (Prevention)
데드락의 4가지 필수 조건 중 하나 이상을 제거하는 방식입니다.

#### 상호 배제 조건 제거
- 공유 가능한 자원의 경우 여러 프로세스가 동시에 사용하도록 허용
- 단, 프린터와 같은 본질적 상호 배제 자원은 제거 불가능

#### 점유 대기 조건 제거
- 프로세스가 실행 전 필요한 모든 자원을 한번에 할당받도록 함
- 자원 이용률이 낮아지는 단점 존재

#### 비선점 조건 제거
- 자원을 선점 가능하도록 설계
- 다른 프로세스가 필요로 하는 자원을 강제로 반환하도록 함

#### 순환 대기 조건 제거
- 자원에 고유 번호를 할당하고 오름차순으로만 자원 요청 허용
- 구현이 비교적 용이하나 자원 활용도가 떨어질 수 있음

## Q4. 회피 방법에 대해서 더 자세히 설명해주세요.

### 데드락 회피 (Avoidance)
시스템의 상태를 계속 감시하며 안전한 상태를 유지하는 방식입니다.

#### 은행원 알고리즘
프로세스가 자원을 요청할 때마다 할당이 시스템을 안전 상태로 유지할 수 있는지 확인하고, 안전한 경우에만 자원을 할당합니다.

#### 필요한 데이터 구조
- **Available**: 시스템의 각 자원 유형별 사용 가능한 개수
- **Max**: 각 프로세스의 최대 자원 요구량
- **Allocation**: 각 프로세스에 현재 할당된 자원의 수
- **Need**: 각 프로세스가 앞으로 더 필요로 하는 자원의 수

#### 동작 방식
1. 프로세스가 자원을 요청하면, 시스템은 요청된 자원을 가상으로 할당
2. 가상 할당 후 시스템이 안전 상태를 유지하는지 확인
3. 안전 상태인 경우 실제로 자원을 할당하고, 불안전 상태라면 요청을 거절

#### 제약사항
- 시스템의 전체 자원 수가 고정되어 있어야 함
- 프로세스들의 최대 자원 요구량을 미리 알고 있어야 함
- 자원의 이용률이 낮아질 수 있다는 단점이 있음

## Q5. 탐지 및 복구 방법에 대해서 더 자세하게 설명해주세요.

### 데드락 탐지 및 복구 (Detection & Recovery)
데드락 발생을 허용하되, 주기적으로 탐지하고 발생 시 복구하는 방식입니다.

#### 탐지 방법
- 자원 할당 그래프를 통한 순환 대기 검출
- 주기적인 시스템 상태 체크

#### 복구 방법
1. **프로세스 종료**
   - 데드락에 관련된 모든 프로세스 종료
   - 데드락이 해결될 때까지 한 프로세스씩 종료

2. **자원 선점**
   - 데드락 상태의 프로세스로부터 자원을 강제 회수
   - 우선순위가 낮은 프로세스부터 자원 선점
